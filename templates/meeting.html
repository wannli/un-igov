{% extends "base.html" %}
{% set page_title = meeting.MT_name or "Meeting" %}
{% block content %}
<div class="sdg-banner">
  <div class="sdg-color sdg-1"></div>
  <div class="sdg-color sdg-2"></div>
  <div class="sdg-color sdg-3"></div>
  <div class="sdg-color sdg-4"></div>
  <div class="sdg-color sdg-5"></div>
  <div class="sdg-color sdg-6"></div>
  <div class="sdg-color sdg-7"></div>
  <div class="sdg-color sdg-8"></div>
  <div class="sdg-color sdg-9"></div>
  <div class="sdg-color sdg-10"></div>
  <div class="sdg-color sdg-11"></div>
  <div class="sdg-color sdg-12"></div>
  <div class="sdg-color sdg-13"></div>
  <div class="sdg-color sdg-14"></div>
  <div class="sdg-color sdg-15"></div>
  <div class="sdg-color sdg-16"></div>
  <div class="sdg-color sdg-17"></div>
</div>

<div class="breadcrumbs">
  <a href="{{ site.base_url }}index.html">Home</a>
  <span>/</span>
  <a href="{{ site.base_url }}ga/plenary/{{ session }}/meetings/index.html">Meetings</a>
  <span>/</span>
  <span>{{ meeting.MT_name or "Meeting" }}</span>
</div>

<div class="page-header">
  <h1>{{ meeting.MT_name or "Meeting" }}</h1>
  {% if meeting.MT_type %}
    <span class="badge">{{ meeting.MT_type }}</span>
  {% endif %}
</div>

<div class="card mb-4">
  <div class="card-body">
    <div class="filter-bar" style="margin-bottom: 0; border: none; padding: 0;">
      <div class="meta-item" style="display: flex; flex-direction: column; gap: 4px;">
        <span class="filter-bar-label">Date</span>
        <span style="font-size: 1rem; color: var(--un-black);">{{ meeting.MT_dateTimeScheduleStart | datetime_format("%A, %d %B %Y") }}</span>
      </div>
      <div class="meta-item" style="display: flex; flex-direction: column; gap: 4px;">
        <span class="filter-bar-label">Time</span>
        <span style="font-size: 1rem; color: var(--un-black);">{{ meeting.MT_dateTimeScheduleStart[11:16] }} - {{ meeting.MT_dateTimeScheduleEnd[11:16] }}</span>
      </div>
      {% if meeting.MT_room %}
      <div class="meta-item" style="display: flex; flex-direction: column; gap: 4px;">
        <span class="filter-bar-label">Location</span>
        <span style="font-size: 1rem; color: var(--un-black);">{{ meeting.MT_room }}</span>
      </div>
      {% endif %}
      {% if meeting.MT_session %}
      <div class="meta-item" style="display: flex; flex-direction: column; gap: 4px;">
        <span class="filter-bar-label">Session</span>
        <span style="font-size: 1rem; color: var(--un-black);">{{ meeting.MT_session }}</span>
      </div>
      {% endif %}
    </div>
  </div>
</div>

{% if meeting.MT_commentary %}
<div class="section-header mt-4">
  <h2>Overview</h2>
</div>
<div class="card mb-4">
  <div class="card-body">
    {{ meeting.MT_commentary | safe }}
  </div>
</div>
{% endif %}

{% if meeting.MT_segment or rendered_procedure_steps %}
<div class="section-header mt-4">
  <h2>Proceedings</h2>
</div>
<div class="card mb-4">
  <div class="card-body" style="line-height: 1.8;">
    {% for segment in meeting.MT_segment | default([]) %}
      {% set segment_id = loop.index0 + 1 %}
      <p><strong>{{ segment.MTS_segmentTitle or segment.MTS_segmentInfo or 'Agenda Item' }}</strong></p>
      {% if steps_by_segment[segment_id] %}
        {% for step in steps_by_segment[segment_id] %}
          <p>
            {{ step.text | safe }}
            {% if step.speakers %}
              {% for speaker in step.speakers %}{{ speaker.name }}{% if not loop.last %}, {% endif %}{% endfor %}.
            {% endif %}
          </p>
        {% endfor %}
      {% endif %}
    {% endfor %}
  </div>
</div>
{% endif %}

<div class="mt-4 text-center">
  <a href="https://igov.un.org/ga/plenary/{{ session }}/meeting/{{ meeting_id }}" target="_blank" rel="noopener" class="btn btn-outline">
    View on igov.un.org â†’
  </a>
</div>
{% endblock %}
